<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>관리자 대시보드</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" th:href="@{/css/admin/dashboard.css}"/>
    <link rel="stylesheet" th:href="@{/css/admin/managerSidebar.css}"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
<div class="dashboard-container">
    <!-- 사이드바 -->
    <div th:replace="~{fragments/managerSidebar :: sidebar}"></div>

    <!-- 헤더 -->
    <div class="top-container">
        <div class="user-nav">
            <button class="notification">
                <svg class="notification__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12.0201 2.91003C8.71009 2.91003 6.02009 5.60003 6.02009 8.91003V11.8C6.02009 12.41 5.76009 13.34 5.45009 13.86L4.30009 15.77C3.59009 16.95 4.08009 18.26 5.38009 18.7C9.69009 20.14 14.3401 20.14 18.6501 18.7C19.8601 18.3 20.3901 16.87 19.7301 15.77L18.5801 13.86C18.2801 13.34 18.0201 12.41 18.0201 11.8V8.91003C18.0201 5.61003 15.3201 2.91003 12.0201 2.91003Z" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"/>
                    <path d="M13.8699 3.19994C13.5599 3.10994 13.2399 3.03994 12.9099 2.99994C11.9499 2.87994 11.0299 2.94994 10.1699 3.19994C10.4599 2.45994 11.1799 1.93994 12.0199 1.93994C12.8599 1.93994 13.5799 2.45994 13.8699 3.19994Z" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M15.02 19.0601C15.02 20.7101 13.67 22.0601 12.02 22.0601C11.2 22.0601 10.44 21.7201 9.90002 21.1801C9.36002 20.6401 9.02002 19.8801 9.02002 19.0601" stroke="#292D32" stroke-width="1.5" stroke-miterlimit="10"/>
                </svg>
                <!-- 알림이 없으므로 빨간 점 표시 안 함 -->
                <span th:if="${hasNotifications}" class="notification-dot"></span>
            </button>
            <div class="user-info">
                <!-- 기본 프로필 이미지로 고정 -->
                <img src="/img/default-profile.png" alt="User Profile" class="user-image" />
                <span class="user-name">admin</span>
            </div>
        </div>
    </div>

    <!-- 콘텐츠 영역 -->
    <div class="content-container">
        <!-- KPI -->
        <div th:replace="~{fragments/kpis :: kpiCards}"></div>

        <!-- 첫 번째 줄: 1대1 문의 상태 및 등급별 회원 비율 -->
        <div class="charts-row-1">
            <div class="chart-box">
                <div th:replace="~{fragments/inquiryDoughnut :: inquiryDoughnut(inquiryStatusCounts=${inquiryStatusCounts})}"></div>
            </div>
            <div class="chart-box">
                <div th:replace="~{fragments/memberTierPieChart :: memberTierPieChart}"></div>
            </div>
        </div>

        <!-- 두 번째 줄: 주간 신규 가입자 수 및 1주일간 방문자 현황 -->
        <div class="charts-row-2">
            <div class="chart-box weekly-users-chart">
                <div th:replace="~{fragments/weeklyNewUsers :: weeklyNewUsersChart}"></div>
            </div>
            <div class="chart-box weekly-visitors-chart">
                <div th:replace="~{fragments/weeklyVisitorsChart :: weeklyVisitorsChart}"></div>
            </div>
        </div>
    </div>
</div>
</body>
</html>